#!/bin/bash
#  _______   _______
# |  _____| |  ___  |
# | |       | |   | |    Rolando Ramos Torres (@rolodoom)
# | |       | |___| |    http://rolandoramostorres.com
# |_|       |_______|
#  _         _______     r_lamp
# | |       |  ___  |
# | |       | |   | |    LAMP Server Control
# | |_____  | |___| |    for my Testing Web server
# |_______| |_______|
#
#
#

echo "**************************************"
echo "*                                    *"
echo "*        LAMP Server Control         *"
echo "*                                    *"
echo "**************************************"
echo "Available commands:"
echo ""
echo "  [S]tart"
echo "  [K]ill"
echo "  [R]estart"
echo "  [P]ublic HTML folder (Set permissions ~/public_html)"
echo "  [H]ttp folder at /var/www (Set permissions /var/www/html/)"
echo "  [Q]uit"
echo ""
echo -n "Command [S,K,R,P,V,Q]:"

read input

echo ""

case "$input" in
    start|START|S|s)
    echo "Starting..."
    sudo systemctl start apache2
    sudo systemctl start mysql
    echo "LAMP Server is ON"
    ;;

    stop|STOP|K|k)
    echo "Stopping..."
    sudo systemctl stop apache2
    sudo systemctl stop mysql
    echo "LAMP Server is OFF"
    ;;
    
    restart|RESTART|R|r)
    echo "Re-Starting..."
    sudo systemctl restart apache2
    sudo systemctl restart mysql
    echo "LAMP Server is ON"
    ;;
    
    h|H|http|HTTP)
    echo "Setting permissions on /var/www/html/ folder ..."
    sudo chown -R www-data:www-data /var/www/html/
    sudo chmod -R g+rwX /var/www/html/
    echo "Done!"
    ;;

    p|P|public|PUBLIC)
    echo "Setting permissions on ~/public_html folder ..."
    sudo chown -R www-data:www-data ~/public_html/
    sudo chown -R $USER:www-data ~/public_html/myserver
    sudo chmod -R g+rwX ~/public_html/
    echo "Done!"
    ;;
   
    quit|QUIT|Q|q|exit|EXIT|x|X) 
    echo "Bye!!!!"
    ;;
    
    # NOT IMPLEMENTED
    *)
    echo "Choose an available command!!!"
    ;;

esac

echo ""
